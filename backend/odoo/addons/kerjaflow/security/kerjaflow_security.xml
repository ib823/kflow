<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!--
        KerjaFlow Record Rules
        ======================
        Note: Complex domain rules that reference user.kf_employee_id
        will be applied via Python code in the API controllers.
        These basic rules provide read access for authenticated users.
        -->

        <!-- Company: Users can see all companies (read-only for most) -->
        <record id="rule_company_read" model="ir.rule">
            <field name="name">Company: Read All</field>
            <field name="model_id" ref="model_kf_company"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_employee'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- Leave Type: All users can read leave types -->
        <record id="rule_leave_type_read" model="ir.rule">
            <field name="name">Leave Type: Read All</field>
            <field name="model_id" ref="model_kf_leave_type"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_employee'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- Public Holiday: All users can read holidays -->
        <record id="rule_public_holiday_read" model="ir.rule">
            <field name="name">Public Holiday: Read All</field>
            <field name="model_id" ref="model_kf_public_holiday"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_employee'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- HR Admin: Full access to employees -->
        <record id="rule_employee_hr_full" model="ir.rule">
            <field name="name">HR: Full Employee Access</field>
            <field name="model_id" ref="model_kf_employee"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_hr_exec'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- HR Admin: Full access to leave requests -->
        <record id="rule_leave_request_hr_full" model="ir.rule">
            <field name="name">HR: Full Leave Request Access</field>
            <field name="model_id" ref="model_kf_leave_request"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_hr_exec'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- HR Admin: Full access to leave balances -->
        <record id="rule_leave_balance_hr_full" model="ir.rule">
            <field name="name">HR: Full Leave Balance Access</field>
            <field name="model_id" ref="model_kf_leave_balance"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_hr_exec'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- HR Manager: Full access to payslips -->
        <record id="rule_payslip_hr_full" model="ir.rule">
            <field name="name">HR Manager: Full Payslip Access</field>
            <field name="model_id" ref="model_kf_payslip"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_hr_manager'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- HR Admin: Full access to documents -->
        <record id="rule_document_hr_full" model="ir.rule">
            <field name="name">HR: Full Document Access</field>
            <field name="model_id" ref="model_kf_document"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_hr_exec'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <!-- Admin: Full access to users -->
        <record id="rule_user_admin_full" model="ir.rule">
            <field name="name">Admin: Full User Access</field>
            <field name="model_id" ref="model_kf_user"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_admin'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Admin: Full access to notifications -->
        <record id="rule_notification_admin_full" model="ir.rule">
            <field name="name">Admin: Full Notification Access</field>
            <field name="model_id" ref="model_kf_notification"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_admin'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>

        <!-- Admin: Full access to audit logs -->
        <record id="rule_audit_log_admin_full" model="ir.rule">
            <field name="name">Admin: Full Audit Log Access</field>
            <field name="model_id" ref="model_kf_audit_log"/>
            <field name="domain_force">[(1, '=', 1)]</field>
            <field name="groups" eval="[(4, ref('group_admin'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="False"/>
        </record>

    </data>
</odoo>
